import{_ as $}from"./pplugin-vue_export-helper.cdc0426e.js";import{r as g,o as c,c as l,a as e,d as i,e as x,a7 as I,F as B,b as L,z as h,aJ as N,b4 as f,t as T,M as S,bo as U,aF as R,aD as H,aI as P,bp as A,a2 as q,aq as F,bt as K,a1 as M,w as z,bn as w,br as E,bs as J,ax as O}from"./index.4eed476e.js";import{u as G}from"./service.09a51995.js";const Q={},W={class:"client__header d-f-center justify-between"},X=e("div",{class:"client__header-title"},"\u0411\u0430\u0437\u0430 \u0434\u0430\u043D\u043D\u044B\u0445",-1),Y={class:"client__search"},Z=e("input",{type:"search",required:""},null,-1),ee={class:"placeholder d-f-center justify-center"},te=e("span",null,"\u041D\u043E\u043C\u0435\u0440 \u0430\u0432\u0442\u043E",-1),se=e("span",{class:"mr8"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430",-1);function oe(a,d){const s=g("Icon");return c(),l("div",W,[X,e("form",Y,[Z,e("div",ee,[i(s,{class:"mr8",id:"search"}),te])]),e("div",{onClick:d[0]||(d[0]=o=>a.$emit("create")),class:"client__header-add d-f-center text-blue",role:"button"},[se,x(),i(s,{id:"plus"})])])}const ae=$(Q,[["render",oe]]);const ie={},ne={class:"theader"},de=I('<div class="theader__inner d-f-center" data-v-af7f8d1c><div class="titem theader__item" data-v-af7f8d1c>\u041D\u043E\u043C\u0435\u0440 \u0430\u0432\u0442\u043E</div><div class="titem theader__item" data-v-af7f8d1c>\u0418\u043C\u044F</div><div class="titem theader__item" data-v-af7f8d1c>\u0422\u0435\u043B\u0435\u0444\u043E\u043D</div><div class="titem theader__item" data-v-af7f8d1c>\u0422\u0438\u043F \u043A\u0443\u0437\u043E\u0432\u0430</div><div class="titem theader__item" data-v-af7f8d1c>\u041C\u0430\u0440\u043A\u0430 \u0438 \u043C\u043E\u0434\u0435\u043B\u044C</div><div class="titem theader__item" data-v-af7f8d1c>\u0414\u043E\u0433\u043E\u0432</div><div class="titem theader__item" data-v-af7f8d1c>\u0421\u043A\u0438\u0434\u043A\u0430</div><div class="titem theader__item" data-v-af7f8d1c>\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F</div></div>',1),ce=[de];function _e(a,d){return c(),l("div",ne,ce)}const le=$(ie,[["render",_e],["__scopeId","data-v-af7f8d1c"]]);const re={},ue={class:"tbody"},ve={class:"tbody__inner cscroll"},me=I('<div class="titem tbody__item" data-v-7f7f47bd>\u0410111\u0410\u0410 116</div><div class="titem tbody__item" data-v-7f7f47bd>\u0412\u043B\u0430\u0434\u0438\u043C\u0438\u0440</div><div class="titem tbody__item" data-v-7f7f47bd>+7 (495) 123-45-678</div><div class="titem tbody__item" data-v-7f7f47bd>\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B</div><div class="titem tbody__item" data-v-7f7f47bd>\u0411\u041C\u0412 \u0424480</div><div class="titem tbody__item" data-v-7f7f47bd>\u0414\u0430 / 1000 \u20BD</div><div class="titem tbody__item" data-v-7f7f47bd>10%</div>',7),pe={class:"titem tbody__item"},fe={class:"btn btn--icon"},he={class:"btn btn--icon"};function be(a,d){const s=g("Icon");return c(),l("div",ue,[e("div",ve,[(c(),l(B,null,L(90,o=>e("div",{class:"tbody__items d-f-center",key:o},[me,e("div",pe,[e("button",fe,[i(s,{class:"text-blue",id:"history"})]),e("button",he,[i(s,{class:"text-blue",id:"pencil"})])])])),64))])])}const ye=$(re,[["render",be],["__scopeId","data-v-7f7f47bd"]]);const V=a=>(R("data-v-50e92c02"),a=a(),H(),a),we={class:"idd"},xe={class:"idd__label"},$e=V(()=>e("span",null,"\u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B",-1)),ge={class:"idd__content"},ke=V(()=>e("form",{class:"idd__search"},[e("input",{type:"search",placeholder:"\u041F\u043E\u0438\u0441\u043A"})],-1)),Ce={__name:"InputDropDown",props:{label:{type:String,default:""}},setup(a,{expose:d}){const s=h(!1),o=()=>{s.value=!0},_=t=>{s.value=!1},r=t=>{t&&_()},v=()=>s.value?_():o();return d({show:o,hide:_}),(t,b)=>{const p=g("Icon"),k=N("clickoutside");return f((c(),l("div",we,[e("div",{onClick:v,class:"idd__btn",role:"button"},[e("div",xe,T(a.label),1),e("div",{class:S([{active:s.value},"idd__text d-f-center justify-between"])},[$e,i(p,{id:"arrow"})],2)]),f(e("div",ge,[ke,e("div",{class:"idd__items cscroll"},[e("div",{onClick:_,class:"idd__item d-f-center",role:"button"},"erer")])],512),[[U,s.value]])])),[[k,r]])}}},C=$(Ce,[["__scopeId","data-v-50e92c02"]]);const Ie=["onKeydown"],Se={class:"row-modal__inner d-f-center column align-start"},Ue={class:"row-modal__fade"},Ve={__name:"RowPopUp",props:{popUpClass:{type:String,default:""}},setup(a,{expose:d}){const s=h(!1),o=h(),_=async v=>{var b;s.value=!0,await F(),o.value.focus();const t=(b=o.value)==null?void 0:b.querySelectorAll("input");t.length>0&&t[0].focus()},r=()=>{s.value=!1};return d({show:_,hide:r}),(v,t)=>s.value?(c(),l("div",{key:0,onKeydown:A(r,["esc"]),tabindex:"0",ref_key:"popUp",ref:o,class:S([a.popUpClass,"row-modal d-f-center justify-center"])},[e("div",Se,[P(v.$slots,"default")]),f(e("div",Ue,null,512),[[U,s.value]])],42,Ie)):q("",!0)}},De={key:0,class:"row-modal__header d-f-center justify-between w-100"},je=e("div",{class:"row-modal__title"},"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0430",-1),Be=e("span",{class:"mr8"},"\u041E\u0442\u043C\u0435\u043D\u0430",-1),Le={key:1,class:"row-modal__header d-f-center justify-between w-100"},Ne=e("div",{class:"row-modal__title"},"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0430",-1),Te=e("span",{class:"mr8"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",-1),Re=e("span",{class:"mr8"},"\u041E\u0442\u043C\u0435\u043D\u0430",-1),He={class:"row-modal__items w-100"},Pe={class:"row-modal__item"},Ae={class:"input"},qe=e("label",{for:"number"}," \u041D\u043E\u043C\u0435\u0440 \u0430\u0432\u0442\u043E ",-1),Fe={class:"row-modal__item"},Ke={class:"input"},Me=e("label",{for:"name"}," \u0418\u043C\u044F ",-1),ze={class:"row-modal__item"},Ee={class:"input"},Je=e("label",{for:"phone"}," \u0422\u0435\u043B\u0435\u0444\u043E\u043D ",-1),Oe={class:"row-modal__item"},Ge={class:"row-modal__item row-modal__item--half"},Qe=e("div",{class:"row-modal__item"},[e("div",{class:"toggle-fake"},[e("label",{for:"s",class:"toggle-fake__label"}," \u0414\u043E\u0433\u043E\u0432\u043E\u0440\u043D\u044F\u043A "),e("label",{class:"d-f-center justify-between toggle",for:"s"},[e("span",{class:"mr8"},"\u0414\u043E\u0433\u043E\u0432\u043E\u0440\u043D\u044F\u043A"),e("input",{type:"checkbox",name:"s",id:"s"}),e("div",{class:"toggle__item"})])])],-1),We={class:"row-modal__item row-modal__item--half"},Xe={class:"row-modal__item-ch input input--icon"},Ye=e("label",{for:"discount"}," \u0421\u043A\u0438\u0434\u043A\u0438 ",-1),Ze=e("div",{class:"input__icon"}," % ",-1),et={class:"row-modal__item-ch input input--icon"},tt=e("label",{for:"summ"}," \u0421\u0443\u043C\u043C\u0430 ",-1),st=e("div",{class:"input__icon"}," \u20BD ",-1),ot={key:2,class:"row-modal__btn"},at={key:3,class:"row-modal__btn"},it={__name:"ClientsPopUp",setup(a,{expose:d}){const s=G(),o=K(),_=h(),r=h(!1),v=h(""),t=h({number:""}),b=u=>{u==="create"?r.value=!0:(r.value=!1,t.value=s.getServiceById(u),v.value=u),_.value.show()},p=()=>{t.value={description:"",is_luxury:0,service_id:""},v.value="",_.value.hide()},k=async()=>{if(t.value.description.length>0){o.isLoading=!0;const u=t.value.description,n=Number(t.value.is_luxury);p(),await s.create({description:u,is_luxury:n}),await s.fetch(),o.isLoading=!1}},D=async()=>{if(t.value.description.length>0){console.log(t.value.description.length),o.isLoading=!0;const u=t.value.description,n=Number(t.value.is_luxury),y=v.value;p(),await s.edit({description:u,is_luxury:n,service_id:y}),await s.fetch(),o.isLoading=!1}},j=async()=>{o.isLoading=!0;const u=v.value;p(),await s.remove({service_id:u}),await s.fetch(),o.isLoading=!1};return d({show:b,hide:p}),(u,n)=>{const y=g("Icon");return c(),M(Ve,{ref_key:"popUpRef",ref:_},{default:z(()=>[r.value?(c(),l("div",De,[je,e("div",{onClick:p,class:"row-modal__cancel d-f-center",role:"button"},[Be,x(),i(y,{class:"x",id:"plus"})])])):(c(),l("div",Le,[Ne,e("div",{onClick:j,class:"row-modal__clear d-f-center text-red",role:"button"},[Te,x(),i(y,{id:"trash"})]),e("div",{onClick:p,class:"row-modal__cancel d-f-center",role:"button"},[Re,x(),i(y,{class:"x",id:"plus"})])])),e("div",He,[e("div",Pe,[e("div",Ae,[qe,f(e("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>t.value.number=m),type:"text",id:"number"},null,512),[[w,t.value.number,void 0,{trim:!0}]])])]),e("div",Fe,[e("div",Ke,[Me,f(e("input",{"onUpdate:modelValue":n[1]||(n[1]=m=>t.value.number=m),type:"text",id:"name"},null,512),[[w,t.value.number,void 0,{trim:!0}]])])]),e("div",ze,[e("div",Ee,[Je,f(e("input",{"onUpdate:modelValue":n[2]||(n[2]=m=>t.value.number=m),type:"text",id:"phone"},null,512),[[w,t.value.number,void 0,{trim:!0}]])])]),e("div",Oe,[i(C,{label:"\u0422\u0438\u043F \u043A\u0443\u0437\u043E\u0432\u0430"})]),e("div",Ge,[i(C,{class:"row-modal__item-ch",label:"\u041C\u0430\u0440\u043A\u0430"}),i(C,{class:"row-modal__item-ch",label:"\u041C\u043E\u0434\u0435\u043B\u044C"})]),Qe,e("div",We,[e("div",Xe,[Ye,f(e("input",{"onUpdate:modelValue":n[3]||(n[3]=m=>t.value.number=m),type:"text",id:"discount"},null,512),[[w,t.value.number,void 0,{trim:!0}]]),Ze]),e("div",et,[tt,f(e("input",{"onUpdate:modelValue":n[4]||(n[4]=m=>t.value.number=m),type:"text",id:"summ"},null,512),[[w,t.value.number,void 0,{trim:!0}]]),st])])]),r.value?(c(),l("div",ot,[e("button",{onClick:k,class:"btn btn--primary"},"\u0413\u043E\u0442\u043E\u0432\u043E")])):(c(),l("div",at,[e("button",{onClick:D,class:"btn btn--primary"},"\u0413\u043E\u0442\u043E\u0432\u043E")]))]),_:1},512)}}},nt=E("clients",{state:()=>({clients:[]}),getters:{},actions:{async fetchAll(){const{data:{data:{info:a}}}=await J.get("client/list");console.log(a),this.clients=a}}});const dt={class:"clients"},ct={class:"container"},ut={__name:"ClientsView",setup(a){const d=h(),s=nt();O(async()=>{await s.fetchAll()});const o=()=>{d.value.show("create")};return(_,r)=>(c(),l("div",dt,[e("div",ct,[i(ae,{onCreate:o}),i(le),i(ye),i(it,{ref_key:"clientsPopUpRef",ref:d},null,512)])]))}};export{ut as default};
