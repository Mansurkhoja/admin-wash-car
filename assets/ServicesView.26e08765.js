import{_ as B,u as N}from"./address.b99bb897.js";import{r as U,o as c,c as l,a as e,t as k,d as p,F as x,b as A,z as v,e as g,w as R,a1 as T,aI as P,b4 as y,bo as E,bp as D,M,a2 as j,aq as F,br as K,bs as $,bt as L,bn as O,bl as C,ax as q,f as z}from"./index.4502420c.js";const H={class:"row-item d-f-center"},J={class:"row-item__inner d-f-center w-100"},G={class:"row-item__block"},Q=e("div",{class:"row-item__block"},"\u041B\u044E\u043A\u0441",-1),W={class:"row-item__block"},X={__name:"RowItem",props:{item:{type:Object,default(o){return{}}}},emits:["editItem"],setup(o,{emit:r}){return(s,i)=>{const d=U("Icon");return c(),l("div",H,[e("div",J,[e("div",G,k(o.item.description),1),Q,e("div",W,[e("button",{class:"btn btn--icon",onClick:i[0]||(i[0]=_=>s.$emit("editItem"))},[p(d,{class:"text-blue",id:"pencil"})])])])])}}},Y={class:"row-header d-f-center"},Z={class:"row-header__inner d-f-center w-100"},ee=e("div",{class:"row-header__item"},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",-1),se={__name:"RowHeader",props:{titles:{type:Array,default:()=>[]}},setup(o){return(r,s)=>(c(),l("div",Y,[e("div",Z,[(c(!0),l(x,null,A(o.titles,(i,d)=>(c(),l("div",{class:"row-header__item",key:d},k(i),1))),128)),ee])]))}},te={class:"row-block",id:"rowBlock"},oe={class:"row-content w-100"},ie={class:"row-top d-f-center justify-between"},ae=e("div",{class:"row-title"},"\u0411\u0430\u0437\u0430 \u0434\u0430\u043D\u043D\u044B\u0445",-1),ne={class:"mr8"},ce={class:"row-inner"},re={class:"row-items cscroll"},de={class:"row-content w-100"},le={class:"row-top d-f-center justify-between"},_e={class:"d-f-center"},ue=["onClick"],ve=e("div",{class:"row-inner row-inner--empty"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u043E\u0439\u043A\u0443",-1),pe={__name:"RowBlock",props:{addTitle:{type:String,defaul:""},headerTitles:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},address:{type:Array,default:()=>[]},activeAddress:{type:String}},emits:["addItem","editItem","changeAddress"],setup(o,{emit:r}){v(),v();const s=v();return(i,d)=>{const _=U("Icon");return c(),l("div",te,[e("div",oe,[e("div",ie,[ae,e("div",{onClick:d[0]||(d[0]=a=>i.$emit("addItem")),class:"text-blue d-f-center",role:"button"},[e("span",ne,k(o.addTitle),1),p(_,{id:"plus"})])]),e("div",ce,[p(se,{titles:o.headerTitles},null,8,["titles"]),e("div",re,[(c(!0),l(x,null,A(o.items,a=>(c(),T(X,{onEditItem:t=>i.$emit("editItem",a.service_id),item:a,key:a.service_id},null,8,["onEditItem","item"]))),128))])])]),e("div",de,[e("div",le,[e("div",_e,[g(" \u041C\u043E\u0439\u043A\u0430: "),p(B,{class:"row-dropdown",linkClass:"text-blue",ref_key:"dropDownRef",ref:s,title:o.activeAddress},{body:R(()=>[(c(!0),l(x,null,A(o.address,a=>(c(),l("div",{class:"dropdown__item d-f-center align-start",key:a.node_id,onClick:t=>{i.$emit("changeAddress",a),s.value.hide()}},k(a.description),9,ue))),128))]),_:1},8,["title"])])]),ve])])}}};const me=["onKeydown"],he={class:"row-modal__inner d-f-center column align-start"},fe={class:"row-modal__fade"},we={__name:"RowPopUp",props:{popUpClass:{type:String,default:""}},setup(o,{expose:r}){const s=v(!1),i=v(),d=async a=>{var h;s.value=!0,await F(),i.value.focus();const t=(h=i.value)==null?void 0:h.querySelectorAll("input");t.length>0&&t[0].focus()},_=()=>{s.value=!1};return r({show:d,hide:_}),(a,t)=>s.value?(c(),l("div",{key:0,onKeydown:D(_,["esc"]),tabindex:"0",ref_key:"popUp",ref:i,class:M([o.popUpClass,"row-modal d-f-center justify-center"])},[e("div",he,[P(a.$slots,"default")]),y(e("div",fe,null,512),[[E,s.value]])],42,me)):j("",!0)}},V=K("service",{state:()=>({services:[]}),getters:{getServiceById:o=>r=>o.services.find(s=>s.service_id===r)},actions:{async fetch(){const{data:{data:{info:o}}}=await $.get("service/get");this.services=o},async create({description:o,is_luxury:r}){const s={description:o,is_luxury:r};await $.get("service/add",{params:s})},async remove({service_id:o}){const r={service_id:o};await $.get("service/delete",{params:r})},async edit({description:o,is_luxury:r,service_id:s}){const i={description:o,is_luxury:r,service_id:s};await $.get("service/edit",{params:i})}}}),ye={key:0,class:"row-modal__header d-f-center justify-between w-100"},be=e("div",{class:"row-modal__title"},"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0439 \u0443\u0441\u043B\u0443\u0433\u0438",-1),$e=e("span",{class:"mr8"},"\u041E\u0442\u043C\u0435\u043D\u0430",-1),ge={key:1,class:"row-modal__header d-f-center justify-between w-100"},ke=e("div",{class:"row-modal__title"},"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0441\u043B\u0443\u0433\u0438",-1),xe=e("span",{class:"mr8"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",-1),Se=e("span",{class:"mr8"},"\u041E\u0442\u043C\u0435\u043D\u0430",-1),Ie={class:"row-modal__items w-100"},Ce={class:"row-modal__item"},Ae={class:"input"},Ue=e("label",{for:"create"}," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 ",-1),Re={class:"row-modal__item"},Te={class:"radio-inputs d-f-center"},je={class:"d-f-center justify-center",for:"simplewash"},Le=e("span",null,"\u041E\u0431\u044B\u0447\u043D\u0430\u044F \u043C\u043E\u0439\u043A\u0430",-1),Ve=e("div",{class:"radio-input"},null,-1),Be={class:"d-f-center justify-center",for:"luxwash"},Ne=e("span",null,"\u041B\u044E\u043A\u0441 \u043C\u043E\u0439\u043A\u0430",-1),Pe=e("div",{class:"radio-input"},null,-1),Ee={class:"d-f-center justify-center",for:"changewash"},De=e("span",null,"\u0418\u0437\u043C\u0435\u043D\u044F\u0435\u043C\u0430\u044F \u043C\u043E\u0439\u043A\u0430",-1),Me=e("div",{class:"radio-input"},null,-1),Fe={key:2,class:"row-modal__btn"},Ke={key:3,class:"row-modal__btn"},Oe={__name:"ServicePopUp",setup(o,{expose:r}){const s=V(),i=L(),d=v(),_=v(!1),a=v(""),t=v({description:"",is_luxury:0,service_id:""}),h=n=>{n==="create"?_.value=!0:(_.value=!1,t.value=s.getServiceById(n),a.value=n),d.value.show()},m=()=>{t.value={description:"",is_luxury:0,service_id:""},a.value="",d.value.hide()},S=async()=>{if(t.value.description.length>0){i.isLoading=!0;const n=t.value.description,u=Number(t.value.is_luxury);m(),await s.create({description:n,is_luxury:u}),await s.fetch(),i.isLoading=!1}},b=async()=>{if(t.value.description.length>0){console.log(t.value.description.length),i.isLoading=!0;const n=t.value.description,u=Number(t.value.is_luxury),w=a.value;m(),await s.edit({description:n,is_luxury:u,service_id:w}),await s.fetch(),i.isLoading=!1}},I=async()=>{i.isLoading=!0;const n=a.value;m(),await s.remove({service_id:n}),await s.fetch(),i.isLoading=!1};return r({show:h,hide:m}),(n,u)=>{const w=U("Icon");return c(),T(we,{ref_key:"popUpRef",ref:d},{default:R(()=>[_.value?(c(),l("div",ye,[be,e("div",{onClick:m,class:"row-modal__cancel d-f-center",role:"button"},[$e,g(),p(w,{class:"x",id:"plus"})])])):(c(),l("div",ge,[ke,e("div",{onClick:I,class:"row-modal__clear d-f-center text-red",role:"button"},[xe,g(),p(w,{id:"trash"})]),e("div",{onClick:m,class:"row-modal__cancel d-f-center",role:"button"},[Se,g(),p(w,{class:"x",id:"plus"})])])),e("div",Ie,[e("div",Ce,[e("div",Ae,[Ue,y(e("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>t.value.description=f),type:"text",id:"create"},null,512),[[O,t.value.description,void 0,{trim:!0}]])])]),e("div",Re,[e("div",Te,[e("label",je,[Le,y(e("input",{type:"radio",name:"typewash",id:"simplewash",value:"0","onUpdate:modelValue":u[1]||(u[1]=f=>t.value.is_luxury=f)},null,512),[[C,t.value.is_luxury]]),Ve]),e("label",Be,[Ne,y(e("input",{"onUpdate:modelValue":u[2]||(u[2]=f=>t.value.is_luxury=f),type:"radio",name:"typewash",id:"luxwash",value:"1"},null,512),[[C,t.value.is_luxury]]),Pe]),e("label",Ee,[De,y(e("input",{"onUpdate:modelValue":u[3]||(u[3]=f=>t.value.is_luxury=f),type:"radio",name:"typewash",id:"changewash",value:"2"},null,512),[[C,t.value.is_luxury]]),Me])])])]),_.value?(c(),l("div",Fe,[e("button",{onClick:S,class:"btn btn--primary"},"\u0413\u043E\u0442\u043E\u0432\u043E")])):(c(),l("div",Ke,[e("button",{onClick:b,class:"btn btn--primary"},"\u0413\u043E\u0442\u043E\u0432\u043E")]))]),_:1},512)}}},qe=e("div",{class:"toggle d-none"},[e("input",{type:"checkbox",id:"switch"}),e("label",{for:"switch"},"Toggle")],-1),ze={class:"services"},He={key:0,class:"container"},Qe={__name:"ServicesView",setup(o){const r=["\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0443\u0441\u043B\u0443\u0433\u0438","\u0422\u0438\u043F"],s=N(),i=V(),d=L(),_=v(!1),a=v([]),t=v("\u0412\u044B\u0431\u0440\u0430\u0442\u044C");q(async()=>{d.isLoading=!0,await i.fetch(),await s.fetch(),a.value=JSON.parse(JSON.stringify(s.address)),a.value.pop(),_.value=!0,d.isLoading=!1});const h=v(),m=()=>{b("create")},S=n=>{b(n)},b=n=>{h.value.show(n)},I=n=>{t.value=n.description};return(n,u)=>(c(),l(x,null,[qe,e("div",ze,[_.value?(c(),l("div",He,[p(pe,{class:"services__inner",headerTitles:r,addTitle:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443",items:z(i).services,onAddItem:m,onEditItem:S,onChangeAddress:I,address:a.value,activeAddress:t.value},null,8,["items","address","activeAddress"]),p(Oe,{ref_key:"ServicePopUpRef",ref:h},null,512)])):j("",!0)])],64))}};export{Qe as default};
